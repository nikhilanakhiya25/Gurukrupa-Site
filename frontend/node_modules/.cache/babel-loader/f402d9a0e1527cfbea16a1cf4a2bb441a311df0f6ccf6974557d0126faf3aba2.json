{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import API from'../api/api';import{CartContext}from'../contexts/CartContext';import'./productlist.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductList(){const{addToCart}=useContext(CartContext);const[products,setProducts]=useState([]);const[filtered,setFiltered]=useState([]);// filters\nconst[search,setSearch]=useState('');const[category,setCategory]=useState('All');const[price,setPrice]=useState(1000);useEffect(()=>{API.get('/products').then(res=>{const list=res.data.products||res.data;setProducts(list);setFiltered(list);}).catch(console.error);},[]);function applyFilters(){let list=[...products];if(search.trim()!==''){list=list.filter(p=>p.name.toLowerCase().includes(search.toLowerCase()));}if(category!=='All'){list=list.filter(p=>p.category===category);}list=list.filter(p=>p.price<=price);setFiltered(list);}useEffect(()=>applyFilters(),[search,category,price,products]);// Extract unique categories\nconst categories=['All',...new Set(products.map(p=>p.category))];return/*#__PURE__*/_jsxs(\"div\",{className:\"product-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:search,onChange:e=>setSearch(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{value:category,onChange:e=>setCategory(e.target.value),children:categories.map((cat,index)=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},cat||index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Max Price: \\u20B9\",price]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"10000\",value:price,onChange:e=>setPrice(Number(e.target.value))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:filtered.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-box\",children:/*#__PURE__*/_jsx(\"img\",{src:p.image||'https://via.placeholder.com/250',alt:p.name})}),/*#__PURE__*/_jsx(\"h3\",{children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\" \\u20B9\",p.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>addToCart(p,1),children:\"Add to Cart\"})]},p._id))})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","API","CartContext","jsx","_jsx","jsxs","_jsxs","ProductList","addToCart","products","setProducts","filtered","setFiltered","search","setSearch","category","setCategory","price","setPrice","get","then","res","list","data","catch","console","error","applyFilters","trim","filter","p","name","toLowerCase","includes","categories","Set","map","className","children","type","placeholder","value","onChange","e","target","cat","index","min","max","Number","src","image","alt","onClick","_id"],"sources":["C:/Users/anakhiya nikhil/OneDrive/Desktop/mern-ecommerce-full/Gurukrupa-Site/frontend/src/components/ProductList.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport API from '../api/api';\nimport { CartContext } from '../contexts/CartContext';\nimport './productlist.css';\n\nexport default function ProductList() {\n  const { addToCart } = useContext(CartContext);\n\n  const [products, setProducts] = useState([]);\n  const [filtered, setFiltered] = useState([]);\n\n  // filters\n  const [search, setSearch] = useState('');\n  const [category, setCategory] = useState('All');\n  const [price, setPrice] = useState(1000);\n\n  useEffect(() => {\n    API.get('/products')\n      .then(res => {\n        const list = res.data.products || res.data;\n        setProducts(list);\n        setFiltered(list);\n      })\n      .catch(console.error);\n  }, []);\n\n  function applyFilters() {\n    let list = [...products];\n\n    if (search.trim() !== '') {\n      list = list.filter(p =>\n        p.name.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    if (category !== 'All') {\n      list = list.filter(p => p.category === category);\n    }\n\n    list = list.filter(p => p.price <= price);\n\n    setFiltered(list);\n  }\n\n  useEffect(() => applyFilters(), [search, category, price, products]);\n\n  // Extract unique categories\n  const categories = ['All', ...new Set(products.map(p => p.category))];\n\n  return (\n    <div className=\"product-page\">\n\n      {/* --- SIDEBAR FILTERS --- */}\n      <div className=\"filters\">\n        <h3>Filters</h3>\n\n        <div className=\"filter-box\">\n          <label>Search</label>\n          <input\n            type=\"text\"\n            placeholder=\"Search products...\"\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n          />\n        </div>\n\n        <div className=\"filter-box\">\n          <label>Category</label>\n          <select value={category} onChange={e => setCategory(e.target.value)}>\n          {categories.map((cat, index) => (\n    <option key={cat || index} value={cat}>\n      {cat}\n    </option>\n  ))}\n          </select>\n        </div>\n\n        <div className=\"filter-box\">\n          <label>Max Price: ₹{price}</label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"10000\"\n            value={price}\n            onChange={e => setPrice(Number(e.target.value))}\n          />\n        </div>\n      </div>\n\n      {/* --- PRODUCT GRID --- */}\n      <div className=\"products-grid\">\n        {filtered.map(p => (\n          <div key={p._id} className=\"product-card\">\n            <div className=\"img-box\">\n              <img\n                src={p.image || 'https://via.placeholder.com/250'}\n                alt={p.name}\n              />\n            </div>\n\n            <h3>{p.name}</h3>\n            <p className=\"price\"> ₹{p.price}</p>\n\n            <button\n              className=\"btn-add\"\n              onClick={() => addToCart(p, 1)}\n            >\n              Add to Cart\n            </button>\n          </div>\n        ))}\n      </div>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}