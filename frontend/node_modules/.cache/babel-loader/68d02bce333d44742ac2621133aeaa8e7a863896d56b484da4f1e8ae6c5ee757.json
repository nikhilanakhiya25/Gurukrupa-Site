{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anakhiya nikhil\\\\OneDrive\\\\Desktop\\\\mern-ecommerce-full\\\\frontend\\\\src\\\\components\\\\Cart\\\\payment.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport { CartContext } from \"../../contexts/CartContext\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Payment.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Payment() {\n  _s();\n  const {\n    cart\n  } = useContext(CartContext);\n  const navigate = useNavigate();\n  const shipping = JSON.parse(localStorage.getItem(\"shippingDetails\")) || {};\n  const user = JSON.parse(localStorage.getItem(\"user\")) || {};\n  const [method, setMethod] = useState(\"COD\");\n  const [showConfirm, setShowConfirm] = useState(false);\n  const totalPrice = cart.reduce((sum, item) => sum + item.price * item.qty, 0);\n\n  // ------------ FIX IS HERE ðŸ”¥ ------------\n  const placeOrder = async () => {\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/orders\", {\n        user: user._id,\n        shippingAddress: `${shipping.address}, ${shipping.city}, ${shipping.postalCode}, Phone: ${shipping.phone}`,\n        totalPrice,\n        paymentMethod: method,\n        // FIX: SEND PROPER FORMAT\n        items: cart.map(item => ({\n          product: item._id,\n          // REQUIRED (Your missing field)\n          name: item.name,\n          image: item.image,\n          qty: item.qty,\n          price: item.price\n        }))\n      });\n      alert(\"Order placed successfully!\");\n      navigate(\"/\");\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.log(error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Order failed\");\n    }\n  };\n  // ----------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"payment-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Select Payment Method\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-box\",\n      onClick: () => setMethod(\"COD\"),\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Cash on Delivery (COD)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"place-order-btn\",\n      onClick: () => setShowConfirm(true),\n      children: \"Continue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), showConfirm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confirm-popup\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirm-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Confirm Order?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your order will be placed and visible in Admin Panel.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowConfirm(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"confirm-btn\",\n            onClick: placeOrder,\n            children: \"Place Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(Payment, \"OUFLY/fDDtudtiAwkA/OkuLXF3E=\", false, function () {\n  return [useNavigate];\n});\n_c = Payment;\nvar _c;\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"names":["React","useContext","useState","CartContext","axios","useNavigate","jsxDEV","_jsxDEV","Payment","_s","cart","navigate","shipping","JSON","parse","localStorage","getItem","user","method","setMethod","showConfirm","setShowConfirm","totalPrice","reduce","sum","item","price","qty","placeOrder","res","post","_id","shippingAddress","address","city","postalCode","phone","paymentMethod","items","map","product","name","image","alert","error","_error$response","_error$response$data","console","log","response","data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/anakhiya nikhil/OneDrive/Desktop/mern-ecommerce-full/frontend/src/components/Cart/payment.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { CartContext } from \"../../contexts/CartContext\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Payment.css\";\r\n\r\nexport default function Payment() {\r\n    const { cart } = useContext(CartContext);\r\n    const navigate = useNavigate();\r\n\r\n    const shipping = JSON.parse(localStorage.getItem(\"shippingDetails\")) || {};\r\n    const user = JSON.parse(localStorage.getItem(\"user\")) || {};\r\n\r\n    const [method, setMethod] = useState(\"COD\");\r\n    const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n    const totalPrice = cart.reduce((sum, item) => sum + item.price * item.qty, 0);\r\n\r\n    // ------------ FIX IS HERE ðŸ”¥ ------------\r\n    const placeOrder = async () => {\r\n        try {\r\n            const res = await axios.post(\"http://localhost:5000/api/orders\", {\r\n                user: user._id,\r\n                shippingAddress: `${shipping.address}, ${shipping.city}, ${shipping.postalCode}, Phone: ${shipping.phone}`,\r\n                totalPrice,\r\n                paymentMethod: method,\r\n\r\n                // FIX: SEND PROPER FORMAT\r\n                items: cart.map(item => ({\r\n                    product: item._id,   // REQUIRED (Your missing field)\r\n                    name: item.name,\r\n                    image: item.image,\r\n                    qty: item.qty,\r\n                    price: item.price\r\n                }))\r\n            });\r\n\r\n            alert(\"Order placed successfully!\");\r\n            navigate(\"/\");\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n            alert(error.response?.data?.message || \"Order failed\");\r\n        }\r\n    };\r\n    // ----------------------------------------\r\n\r\n    return (\r\n        <div className=\"payment-page\">\r\n\r\n            <h2>Select Payment Method</h2>\r\n\r\n            <div className=\"payment-box\" onClick={() => setMethod(\"COD\")}>\r\n                <h3>Cash on Delivery (COD)</h3>\r\n            </div>\r\n\r\n            <button className=\"place-order-btn\" onClick={() => setShowConfirm(true)}>\r\n                Continue\r\n            </button>\r\n\r\n            {showConfirm && (\r\n                <div className=\"confirm-popup\">\r\n                    <div className=\"confirm-box\">\r\n                        <h3>Confirm Order?</h3>\r\n                        <p>Your order will be placed and visible in Admin Panel.</p>\r\n\r\n                        <div className=\"confirm-actions\">\r\n                            <button onClick={() => setShowConfirm(false)}>Cancel</button>\r\n                            <button className=\"confirm-btn\" onClick={placeOrder}>Place Order</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,4BAA4B;AACxD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAO,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,eAAe,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAK,CAAC,GAAGT,UAAU,CAACE,WAAW,CAAC;EACxC,MAAMQ,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,CAAC;EAC1E,MAAMC,IAAI,GAAGJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC;EAE3D,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACkB,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMoB,UAAU,GAAGZ,IAAI,CAACa,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACC,KAAK,GAAGD,IAAI,CAACE,GAAG,EAAE,CAAC,CAAC;;EAE7E;EACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAI,CAAC,kCAAkC,EAAE;QAC7Db,IAAI,EAAEA,IAAI,CAACc,GAAG;QACdC,eAAe,EAAE,GAAGpB,QAAQ,CAACqB,OAAO,KAAKrB,QAAQ,CAACsB,IAAI,KAAKtB,QAAQ,CAACuB,UAAU,YAAYvB,QAAQ,CAACwB,KAAK,EAAE;QAC1Gd,UAAU;QACVe,aAAa,EAAEnB,MAAM;QAErB;QACAoB,KAAK,EAAE5B,IAAI,CAAC6B,GAAG,CAACd,IAAI,KAAK;UACrBe,OAAO,EAAEf,IAAI,CAACM,GAAG;UAAI;UACrBU,IAAI,EAAEhB,IAAI,CAACgB,IAAI;UACfC,KAAK,EAAEjB,IAAI,CAACiB,KAAK;UACjBf,GAAG,EAAEF,IAAI,CAACE,GAAG;UACbD,KAAK,EAAED,IAAI,CAACC;QAChB,CAAC,CAAC;MACN,CAAC,CAAC;MAEFiB,KAAK,CAAC,4BAA4B,CAAC;MACnChC,QAAQ,CAAC,GAAG,CAAC;IAEjB,CAAC,CAAC,OAAOiC,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACZC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;MAClBD,KAAK,CAAC,EAAAE,eAAA,GAAAD,KAAK,CAACK,QAAQ,cAAAJ,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBK,IAAI,cAAAJ,oBAAA,uBAApBA,oBAAA,CAAsBK,OAAO,KAAI,cAAc,CAAC;IAC1D;EACJ,CAAC;EACD;;EAEA,oBACI5C,OAAA;IAAK6C,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAEzB9C,OAAA;MAAA8C,QAAA,EAAI;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAE9BlD,OAAA;MAAK6C,SAAS,EAAC,aAAa;MAACM,OAAO,EAAEA,CAAA,KAAMvC,SAAS,CAAC,KAAK,CAAE;MAAAkC,QAAA,eACzD9C,OAAA;QAAA8C,QAAA,EAAI;MAAsB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9B,CAAC,eAENlD,OAAA;MAAQ6C,SAAS,EAAC,iBAAiB;MAACM,OAAO,EAAEA,CAAA,KAAMrC,cAAc,CAAC,IAAI,CAAE;MAAAgC,QAAA,EAAC;IAEzE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAERrC,WAAW,iBACRb,OAAA;MAAK6C,SAAS,EAAC,eAAe;MAAAC,QAAA,eAC1B9C,OAAA;QAAK6C,SAAS,EAAC,aAAa;QAAAC,QAAA,gBACxB9C,OAAA;UAAA8C,QAAA,EAAI;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvBlD,OAAA;UAAA8C,QAAA,EAAG;QAAqD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAE5DlD,OAAA;UAAK6C,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC5B9C,OAAA;YAAQmD,OAAO,EAAEA,CAAA,KAAMrC,cAAc,CAAC,KAAK,CAAE;YAAAgC,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC7DlD,OAAA;YAAQ6C,SAAS,EAAC,aAAa;YAACM,OAAO,EAAE9B,UAAW;YAAAyB,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEA,CAAC;AAEd;AAAChD,EAAA,CAtEuBD,OAAO;EAAA,QAEVH,WAAW;AAAA;AAAAsD,EAAA,GAFRnD,OAAO;AAAA,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}