{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import API from'../api/api';import{CartContext}from'../contexts/CartContext';import'./productlist.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL='http://localhost:5000';// ðŸ”´ change when deployed\nexport default function ProductList(){const{addToCart}=useContext(CartContext);const[products,setProducts]=useState([]);const[filtered,setFiltered]=useState([]);// filters\nconst[search,setSearch]=useState('');const[category,setCategory]=useState('All');const[price,setPrice]=useState(1000);// Load products\nuseEffect(()=>{API.get('/products').then(res=>{const list=res.data.products||res.data;setProducts(list);setFiltered(list);}).catch(err=>console.error(err));},[]);// Apply filters\nfunction applyFilters(){let list=[...products];if(search.trim()){list=list.filter(p=>{var _p$name;return(_p$name=p.name)===null||_p$name===void 0?void 0:_p$name.toLowerCase().includes(search.toLowerCase());});}if(category!=='All'){list=list.filter(p=>p.category===category);}list=list.filter(p=>Number(p.price)<=price);setFiltered(list);}useEffect(()=>{applyFilters();},[search,category,price,products]);// Unique categories\nconst categories=['All',...new Set(products.map(p=>p.category).filter(Boolean))];return/*#__PURE__*/_jsxs(\"div\",{className:\"product-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:search,onChange:e=>setSearch(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{value:category,onChange:e=>setCategory(e.target.value),children:categories.map((cat,index)=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-box\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Max Price: \\u20B9\",price]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"10000\",value:price,onChange:e=>setPrice(Number(e.target.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products-grid\",children:[filtered.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No products found\"}),filtered.map(p=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-box\",children:/*#__PURE__*/_jsx(\"img\",{src:p.image?\"\".concat(BASE_URL).concat(p.image):'https://via.placeholder.com/250',alt:p.name,onError:e=>{e.target.src='https://via.placeholder.com/250';}})}),/*#__PURE__*/_jsx(\"h3\",{children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"\\u20B9\",p.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add\",onClick:()=>addToCart(p,1),children:\"Add to Cart\"})]},p._id))]})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","API","CartContext","jsx","_jsx","jsxs","_jsxs","BASE_URL","ProductList","addToCart","products","setProducts","filtered","setFiltered","search","setSearch","category","setCategory","price","setPrice","get","then","res","list","data","catch","err","console","error","applyFilters","trim","filter","p","_p$name","name","toLowerCase","includes","Number","categories","Set","map","Boolean","className","children","type","placeholder","value","onChange","e","target","cat","index","min","max","length","src","image","concat","alt","onError","onClick","_id"],"sources":["C:/Users/anakhiya nikhil/OneDrive/Desktop/mern-ecommerce-full/Gurukrupa-Site/frontend/src/components/ProductList.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport API from '../api/api';\nimport { CartContext } from '../contexts/CartContext';\nimport './productlist.css';\n\nconst BASE_URL = 'http://localhost:5000'; // ðŸ”´ change when deployed\n\nexport default function ProductList() {\n  const { addToCart } = useContext(CartContext);\n\n  const [products, setProducts] = useState([]);\n  const [filtered, setFiltered] = useState([]);\n\n  // filters\n  const [search, setSearch] = useState('');\n  const [category, setCategory] = useState('All');\n  const [price, setPrice] = useState(1000);\n\n  // Load products\n  useEffect(() => {\n    API.get('/products')\n      .then(res => {\n        const list = res.data.products || res.data;\n        setProducts(list);\n        setFiltered(list);\n      })\n      .catch(err => console.error(err));\n  }, []);\n\n  // Apply filters\n  function applyFilters() {\n    let list = [...products];\n\n    if (search.trim()) {\n      list = list.filter(p =>\n        p.name?.toLowerCase().includes(search.toLowerCase())\n      );\n    }\n\n    if (category !== 'All') {\n      list = list.filter(p => p.category === category);\n    }\n\n    list = list.filter(p => Number(p.price) <= price);\n\n    setFiltered(list);\n  }\n\n  useEffect(() => {\n    applyFilters();\n  }, [search, category, price, products]);\n\n  // Unique categories\n  const categories = ['All', ...new Set(products.map(p => p.category).filter(Boolean))];\n\n  return (\n    <div className=\"product-page\">\n\n      {/* ===== SIDEBAR FILTERS ===== */}\n      <div className=\"filters\">\n        <h3>Filters</h3>\n\n        <div className=\"filter-box\">\n          <label>Search</label>\n          <input\n            type=\"text\"\n            placeholder=\"Search products...\"\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n          />\n        </div>\n\n        <div className=\"filter-box\">\n          <label>Category</label>\n          <select value={category} onChange={e => setCategory(e.target.value)}>\n            {categories.map((cat, index) => (\n              <option key={index} value={cat}>\n                {cat}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"filter-box\">\n          <label>Max Price: â‚¹{price}</label>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"10000\"\n            value={price}\n            onChange={e => setPrice(Number(e.target.value))}\n          />\n        </div>\n      </div>\n\n      {/* ===== PRODUCT GRID ===== */}\n      <div className=\"products-grid\">\n        {filtered.length === 0 && <p>No products found</p>}\n\n        {filtered.map(p => (\n          <div key={p._id} className=\"product-card\">\n            <div className=\"img-box\">\n              <img\n                src={\n                  p.image\n                    ? `${BASE_URL}${p.image}`\n                    : 'https://via.placeholder.com/250'\n                }\n                alt={p.name}\n                onError={(e) => {\n                  e.target.src = 'https://via.placeholder.com/250';\n                }}\n              />\n            </div>\n\n            <h3>{p.name}</h3>\n            <p className=\"price\">â‚¹{p.price}</p>\n\n            <button\n              className=\"btn-add\"\n              onClick={() => addToCart(p, 1)}\n            >\n              Add to Cart\n            </button>\n          </div>\n        ))}\n      </div>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}